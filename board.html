<!DOCTYPE HTML>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Devstone(d)</title>

		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<link rel="stylesheet" href="css/style.css" />
                              
		<!--[if lt IE 9]>
			<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="main-container">
		   <section class="body">
		   		<div class="center board" id="board">
					<div id="user-1" class="player hidden active test blue"></div>
					<div id="user-2" class="player hidden test red"></div>
					<div id="user-3" class="player hidden test green"></div>
					<div id="user-4" class="player hidden test yellow"></div>
			   		<div class="row">
						<div id="position-1" class="col-md-2 board-box start-box">
							<span class="label">Start</span>
						</div>
						<div id="position-2" class="col-md-2 board-box simple-box"></div>
						<div id="position-3" class="col-md-2 board-box duck-box"><span class="label">Bonus++</span></div>
						<div id="position-4" class="col-md-2 board-box simple-box"></div>
						<div id="position-5" class="col-md-2 board-box question-box"><span class="label">Surprise!?</span></div>
						<div id="position-6" class="col-md-2 board-box lunch-box"><span class="label">Lunch Time</span></div>
					</div>
					<div class="row">
						<div id="position-20"class="col-md-2 board-box simple-box"></div>
						<div class="col-md-2 non-visible board-box"><span class="label">Box</span></div>
						<div class="col-md-2 non-visible board-box"><span class="label">Box</span></div>
						<div class="col-md-2 non-visible board-box"><span class="label">Box</span></div>
						<div class="col-md-2 non-visible board-box"><span class="label">Box</span></div>
						<div id="position-7"class="col-md-2 board-box card-box"><span class="label">Pick a Card</span></div>
					</div>
					<div class="row">
						<div id="position-19" class="col-md-2 board-box simple-box"></div>
						<div class="col-md-2 non-visible board-box"><span class="label">Box</span></div>
						<div class="col-md-2 non-visible board-box"><span class="label">Box</span></div>
						<div class="col-md-2 non-visible board-box"><span class="label">Box</span></div>
						<div class="col-md-2 non-visible board-box"><span class="label">Box</span></div>
						<div id="position-8" class="col-md-2 board-box simple-box"></div>
					</div>
					<div class="row">
						<div id="position-18" class="col-md-2 board-box simple-box"></div>
						<div class="col-md-2 non-visible board-box"><span class="label">Box</span></div>
						<div class="col-md-2 non-visible board-box"><span class="label">Box</span></div>
						<div class="col-md-2 non-visible board-box"><span class="label">Box</span></div>
						<div class="col-md-2 non-visible board-box"><span class="label">Box</span></div>
						<div id="position-9" class="col-md-2 board-box simple-box"></div>
					</div>
					<div class="row">
						<div id="position-17" class="col-md-2 board-box card-box"><span class="label">Pick a Card</span></div>
						<div class="col-md-2 non-visible board-box"><span class="label">Box</span></div>
						<div class="col-md-2 non-visible board-box"><span class="label">Box</span></div>
						<div class="col-md-2 non-visible board-box"><span class="label">Box</span></div>
						<div class="col-md-2 non-visible board-box"><span class="label">Box</span></div>
						<div id="position-10" class="col-md-2 board-box simple-box"></div>
					</div>
					<div class="row">
						<div id="position-16" class="col-md-2 board-box black-box"><span class="label">Dev Jail</span></div>
						<div id="position-15" class="col-md-2 board-box question-box"><span class="label">Surprise!?</span></div>
						<div id="position-14" class="col-md-2 board-box simple-box"></div>
						<div id="position-13"class="col-md-2 board-box duck-box"><span class="label">Bonus++</span></div>
						<div id="position-12" class="col-md-2 board-box simple-box"></div>
						<div id="position-11" class="col-md-2 board-box crossroad-box"><span class="label">Crossroad</span></div>
					</div>
				</div>
		   </section>
		</div>
		<img id="qrcode"/>
		<button id="restart">Restart</button>
	</body>

	<!-- Scripts -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script>
		var socket = io.connect('/');
		socket.on("connect", function(){
			socket.emit('initialize_board');
		});

		//handle user events 
		socket.on("update", function(userId, pos) {
			changePosition(userId, pos);
		});
		socket.on("join", function(userId) {
			addUser(userId);
		});
		socket.on("nextTurn", function(userId) {
			changeActive(userId);
		});

		$('#restart').click(function(){
			socket.emit('restart');
			window.location.reload();
		});

		function changePosition(userId, pos) {
			var activeUser = $( '#user-' + userId ).detach();
			activeUser.appendTo('#position-' + pos);
		}
		function addUser(userId) {
			$('#user-' + userId).removeClass("hidden");
		}
		function changeActive(userId) {
			//bold pin of the user
			$(".active").removeClass("active");
			$("#user-" + userId).addClass("active");
		}

		// Show the qrcode
		$.ajax({
         url: "https://pierre2106j-qrcode.p.mashape.com/api?backcolor=ffffff&ecl=L+%7C+M%7C+Q+%7C+H&forecolor=000000&pixel=10&text=hello%20devlabs&type=text+%7C+url+%7C+tel+%7C+sms+%7C+email",
         data: { 
         	backcolor: 'ffffff',
         	ecl: 'L | M| Q | H',
         	forecolor: '000000',
         	pixed: 10,
         	text: window.location.origin + '/user.html',
         	type: 'url'
         }, 
         type: "GET",
         beforeSend: function(xhr){
         	xhr.setRequestHeader('X-Mashape-Key', '7SXKzjv3sPmshq6uoh4fCpaZbAo9p1e28QPjsnbKthhNHXfvMW');
         },
         success: function(response) { 
         	$('#qrcode').attr('src', response); 
         }
      });


	</script>

</html>


<style>
	/*#text{
		height: 200px;
		width: 99%;
		border: 1px solid #aaa;
		overflow: scroll;
	}
	#message {
		width: 99%;
	}

	.hidden {
		display: none;
	}

	.activeTurn {
		background-color: red;
	}*/
</style>

<!-- <div id='board'>
	<div id="user-1" class="hidden">user 1</div>
	<div id="user-2" class="hidden">user 2</div>
	<div id="user-3" class="hidden">user 3</div>
	<div id="user-4" class="hidden">user 4</div>
	<div id="user-5" class="hidden">user 5</div>
	<div id="position-1">position</div>
	<div id="position-2">position</div>
	<div id="position-3">position</div>
	<div id="position-4">position</div>
</div> -->


